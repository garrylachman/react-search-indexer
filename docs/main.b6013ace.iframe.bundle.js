(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1045:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__(17),__webpack_require__(28),__webpack_require__(39),__webpack_require__(822),__webpack_require__(34),__webpack_require__(35),__webpack_require__(823),__webpack_require__(824),__webpack_require__(281);var client_api=__webpack_require__(1050),esm=__webpack_require__(7),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{expanded:!0}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))},209:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useSearchIndexer}));__webpack_require__(52),__webpack_require__(18),__webpack_require__(13),__webpack_require__(109),__webpack_require__(4),__webpack_require__(34),__webpack_require__(35),__webpack_require__(8),__webpack_require__(828),__webpack_require__(31),__webpack_require__(39),__webpack_require__(118),__webpack_require__(28),__webpack_require__(30),__webpack_require__(62),__webpack_require__(32),__webpack_require__(37),__webpack_require__(40),__webpack_require__(11),__webpack_require__(70),__webpack_require__(281);var react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_21__),p_queue_dist__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(453);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var initialState={};function useSearchIndexer(state,options){var _options=react__WEBPACK_IMPORTED_MODULE_21___default.a.useMemo((function(){return Object.assign({},function defaultOptions(state){return{getItemKey:function getItemKey(item,index){return"".concat(index)},itemFieldsExtractor:function itemFieldsExtractor(item){return Object.values(item)},concurrency:1}}(),options)}),[options]),_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_21___default.a.useState(initialState),2),indexState=_React$useState2[0],setIndexState=_React$useState2[1],addToQueue=function useIndexerQueue(setIndex){var concurrency=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,queue=react__WEBPACK_IMPORTED_MODULE_21___default.a.useMemo((function(){return new p_queue_dist__WEBPACK_IMPORTED_MODULE_22__.a({concurrency:concurrency})}),[]),add=react__WEBPACK_IMPORTED_MODULE_21___default.a.useCallback(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(task){var res;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,queue.add(task);case 2:res=_context.sent,setIndex((function(prevState){return Object.assign({},prevState,res)}));case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),[queue]);return add}(setIndexState,_options.concurrency);react__WEBPACK_IMPORTED_MODULE_21___default.a.useEffect((function(){var dataWithKeys=_toConsumableArray(state).map((function(value,index){return{key:_options.getItemKey(value,index),data:value}}));dataWithKeys.forEach((function(value,index){null==indexState[value.key]&&addToQueue(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _index;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_options.itemFieldsExtractor(value.data);case 2:return _index=_context2.sent,_context2.abrupt("return",_defineProperty({},"".concat(value.key),{index:_index.join(","),data:value.data}));case 4:case"end":return _context2.stop()}}),_callee2)}))))}));var onlyKeys=Object.fromEntries(dataWithKeys.map((function(v){return[v.key,{index:null,data:v.data}]})));setIndexState((function(prevState){return Object.assign({},onlyKeys,prevState)}))}),[state]);var indexedState=react__WEBPACK_IMPORTED_MODULE_21___default.a.useMemo((function(){return Object.values(indexState).filter((function(item){return null!=item.index}))}),[indexState]);return[indexState,indexedState]}},473:function(module,exports,__webpack_require__){__webpack_require__(474),__webpack_require__(630),__webpack_require__(631),__webpack_require__(1039),__webpack_require__(1040),__webpack_require__(1043),__webpack_require__(1042),__webpack_require__(1041),__webpack_require__(1044),__webpack_require__(1045),module.exports=__webpack_require__(825)},541:function(module,exports){},631:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(333)},825:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(333).configure)([__webpack_require__(826)],module,!1)}).call(this,__webpack_require__(188)(module))},826:function(module,exports,__webpack_require__){var map={"./basic-indexer.stories.tsx":827,"./search-indexer.stories.tsx":830};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=826},827:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Basic",(function(){return Basic}));__webpack_require__(52),__webpack_require__(18),__webpack_require__(422),__webpack_require__(4),__webpack_require__(5),__webpack_require__(282),__webpack_require__(13),__webpack_require__(118),__webpack_require__(28),__webpack_require__(30),__webpack_require__(62),__webpack_require__(32),__webpack_require__(31),__webpack_require__(37),__webpack_require__(40),__webpack_require__(11),__webpack_require__(70);var react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__),_search_indexer__WEBPACK_IMPORTED_MODULE_19__=(__webpack_require__(48),__webpack_require__(209)),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(22);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var sleep=function sleep(milliseconds){return new Promise((function(resolve){return setTimeout(resolve,milliseconds)}))},randomString=function randomString(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n--;)r+=String.fromCharCode((r=62*Math.random()|0,r+=r>9?r<36?55:61:48));return r},initialDummyState=[{id:0,textOne:randomString(20),textTwo:randomString(30)}],Template=function Template(args){var _itemFieldsExtractor,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_17___default.a.useState(initialDummyState),2),dummyState=_React$useState2[0],setDummyState=_React$useState2[1],indexerOptions={getItemKey:function getItemKey(item,index){return"KEY-".concat(item.id)},itemFieldsExtractor:(_itemFieldsExtractor=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(item){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(args.delay>0)){_context.next=3;break}return _context.next=3,sleep(1e3*args.delay);case 3:return _context.abrupt("return",[item.textOne,item.textTwo]);case 4:case"end":return _context.stop()}}),_callee)}))),function itemFieldsExtractor(_x){return _itemFieldsExtractor.apply(this,arguments)}),concurrency:1},_useSearchIndexer2=_slicedToArray(Object(_search_indexer__WEBPACK_IMPORTED_MODULE_19__.a)(dummyState,indexerOptions),2),indexedState=(_useSearchIndexer2[0],_useSearchIndexer2[1]),addData=react__WEBPACK_IMPORTED_MODULE_17___default.a.useCallback((function(){var lastID=dummyState[dummyState.length-1].id,addState=_toConsumableArray(Array(args.numOfDummyRecords)).map((function(){return{id:++lastID,textOne:randomString(20),textTwo:randomString(30)}}));setDummyState((function(oldState){return[].concat(_toConsumableArray(oldState),_toConsumableArray(addState))}))}),[dummyState]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("button",{onClick:addData,children:["Add & Index ",args.numOfDummyRecords," Records"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{style:{flex:1,flexDirection:"row",display:"flex",paddingTop:5},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{style:{flex:1},children:["Dummy records: ",dummyState.length]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{style:{flex:1},children:["Indexed records: ",indexedState.length]})]})]})};__webpack_exports__.default={title:"useSearchIndexer",component:Template,argTypes:{delay:{control:{type:"range",min:0,max:10,step:1}}}};var Basic=Template.bind({});Basic.args={delay:0,numOfDummyRecords:10},Basic.parameters=Object.assign({storySource:{source:"(args: StoryArgs) => {\n\n  const [dummyState, setDummyState] = React.useState<DummyData[]>(initialDummyState);\n  const indexerOptions:SearchIndexerOptions<DummyData> = {\n    getItemKey: (item: DummyData, index: number) => `KEY-${item.id}`,\n    itemFieldsExtractor: async (item:DummyData) =>{\n      if (args.delay > 0) {\n        await sleep(args.delay*1000);\n      }\n      return [item.textOne, item.textTwo]\n    },\n    concurrency: 1\n  }\n  const [indexState, indexedState] = useSearchIndexer<DummyData>(dummyState, indexerOptions)\n\n  const addData = React.useCallback(() => {\n    let lastID = dummyState[dummyState.length-1].id;\n    const addState:DummyData[] = [...Array(args.numOfDummyRecords)].map(() => ({\n      id: ++lastID,\n      textOne: randomString(20),\n      textTwo: randomString(30)\n    }));\n    setDummyState(oldState => ([...oldState, ...addState]));\n  }, [dummyState]);\n\n\n  return (\n    <>\n      <button onClick={addData}>Add & Index {args.numOfDummyRecords} Records</button>\n      <div style={{flex: 1, flexDirection: 'row', display: 'flex', paddingTop: 5}}>\n        <div style={{flex: 1}}>\n          Dummy records: {dummyState.length}\n        </div>\n        <div style={{flex: 1}}>\n          Indexed records: {indexedState.length}\n        </div>\n      </div>\n    </>\n  )\n}"}},Basic.parameters)},830:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Search",(function(){return Search}));__webpack_require__(52),__webpack_require__(18),__webpack_require__(422),__webpack_require__(4),__webpack_require__(5),__webpack_require__(39),__webpack_require__(70),__webpack_require__(32),__webpack_require__(25),__webpack_require__(40),__webpack_require__(282),__webpack_require__(13),__webpack_require__(118),__webpack_require__(28),__webpack_require__(30),__webpack_require__(62),__webpack_require__(31),__webpack_require__(37),__webpack_require__(11);var react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),_search_indexer__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(209),react_highlight__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(452),react_highlight__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(react_highlight__WEBPACK_IMPORTED_MODULE_21__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__=(__webpack_require__(1035),__webpack_require__(22));function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var sleep=function sleep(milliseconds){return new Promise((function(resolve){return setTimeout(resolve,milliseconds)}))},randomString=function randomString(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n--;)r+=String.fromCharCode((r=62*Math.random()|0,r+=r>9?r<36?55:61:48));return r},initialDummyState=[{id:0,textOne:randomString(20),textTwo:randomString(30)}],Template=function Template(args){var _itemFieldsExtractor,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_19___default.a.useState(initialDummyState),2),dummyState=_React$useState2[0],setDummyState=_React$useState2[1],indexerOptions={getItemKey:function getItemKey(item,index){return"KEY-".concat(item.id)},itemFieldsExtractor:(_itemFieldsExtractor=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(item){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(args.delay>0)){_context.next=3;break}return _context.next=3,sleep(1e3*args.delay);case 3:return _context.abrupt("return",[item.textOne,item.textTwo]);case 4:case"end":return _context.stop()}}),_callee)}))),function itemFieldsExtractor(_x){return _itemFieldsExtractor.apply(this,arguments)}),concurrency:1},_useSearchIndexer2=_slicedToArray(Object(_search_indexer__WEBPACK_IMPORTED_MODULE_20__.a)(dummyState,indexerOptions),2),indexedState=(_useSearchIndexer2[0],_useSearchIndexer2[1]),addData=react__WEBPACK_IMPORTED_MODULE_19___default.a.useCallback((function(){var lastID=dummyState[dummyState.length-1].id,addState=_toConsumableArray(Array(args.numOfDummyRecords)).map((function(){return{id:++lastID,textOne:randomString(20),textTwo:randomString(30)}}));setDummyState((function(oldState){return[].concat(_toConsumableArray(oldState),_toConsumableArray(addState))}))}),[dummyState]),_React$useState4=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_19___default.a.useState(""),2),searchTermState=_React$useState4[0],setSearchTermState=_React$useState4[1],searchResults=react__WEBPACK_IMPORTED_MODULE_19___default.a.useMemo((function(){return Array.from(indexedState).filter((function(record){return record.index.indexOf(searchTermState)>-1}))}),[indexedState,searchTermState]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)(react_highlight__WEBPACK_IMPORTED_MODULE_21___default.a,{className:"javascript",children:"\n        import { useSearchIndexer, SearchIndexerOptions, IndexState } from './search-indexer'\n        interface DummyData {\n          id: number,\n          textOne: string,\n          textTwo: string\n        }\n        \n        const randomString = (n:number, r:string|number=''):string => {\n          while (n--) r += String.fromCharCode((r=Math.random()*62|0, r+=r>9?(r<36?55:61):48));\n          return r as string;\n        };\n        \n        const initialDummyState: DummyData[] = [\n          {\n            id: 0,\n            textOne: randomString(20),\n            textTwo: randomString(30)\n          }\n        ]\n\n        const App = () => {\n          const [dummyState, setDummyState] = React.useState<DummyData[]>(initialDummyState);\n          const indexerOptions:SearchIndexerOptions<DummyData> = {\n            getItemKey: (item: DummyData, index: number) => 'KEY-' + item.id,\n            itemFieldsExtractor: async (item:DummyData) =>{\n              return [item.textOne, item.textTwo]\n            },\n            concurrency: 1\n          }\n          const [indexState, indexedState] = useSearchIndexer<DummyData>(dummyState, indexerOptions)\n\n          React.useEffect(() => {\n            let lastID = 0;\n            const addState:DummyData[] = [...Array(100)].map(() => ({\n              id: ++lastID,\n              textOne: randomString(20),\n              textTwo: randomString(30)\n            }));\n            setDummyState(oldState => ([...oldState, ...addState]));\n          }, [])\n\n          const [searchTermState, setSearchTermState] = React.useState<string>('');\n          const searchResults = React.useMemo(() => Array.from(indexedState as []).filter((record:IndexState<DummyData>) => record.index.indexOf(searchTermState) > -1), [indexedState, searchTermState])\n\n          return (\n            <>\n            /// use here searchResults for search results\n            </>\n          )\n        }\n\n        export default App\n      "}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("h2",{children:"Prepare Data"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("button",{onClick:addData,children:["Add & Index ",args.numOfDummyRecords," Records"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{style:{flex:1,flexDirection:"row",display:"flex",paddingTop:5},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{style:{flex:1},children:["Dummy records: ",dummyState.length]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{style:{flex:1},children:["Indexed records: ",indexedState.length]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("h2",{children:"Search"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("input",{value:searchTermState,onChange:function onChange(event){var _event$target;return setSearchTermState(null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("h2",{children:["Results (",searchResults&&searchResults.length,")"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{style:{flex:1,flexDirection:"row",display:"flex",fontWeight:"bold",paddingBottom:5},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{style:{flex:1,flexDirection:"column"},children:"ID"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{style:{flex:5,flexDirection:"column"},children:"textOne"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{style:{flex:5,flexDirection:"column"},children:"textTwo"})]}),searchResults&&searchResults.slice(-10).map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsxs)("div",{style:{flex:1,flexDirection:"row",display:"flex"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{style:{flex:1,flexDirection:"column"},children:item.data.id}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{style:{flex:5,flexDirection:"column"},children:item.data.textOne}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_23__.jsx)("div",{style:{flex:5,flexDirection:"column"},children:item.data.textTwo})]},"row-".concat(index))}))]})]})};__webpack_exports__.default={title:"useSearchIndexer",component:Template,argTypes:{}};var Search=Template.bind({});Search.args={numOfDummyRecords:10},Search.parameters=Object.assign({storySource:{source:"(args: StoryArgs) => {\n\n  const [dummyState, setDummyState] = React.useState<DummyData[]>(initialDummyState);\n  const indexerOptions:SearchIndexerOptions<DummyData> = {\n    getItemKey: (item: DummyData, index: number) => `KEY-${item.id}`,\n    itemFieldsExtractor: async (item:DummyData) =>{\n      if (args.delay > 0) {\n        await sleep(args.delay*1000);\n      }\n      return [item.textOne, item.textTwo]\n    },\n    concurrency: 1\n  }\n  const [indexState, indexedState] = useSearchIndexer<DummyData>(dummyState, indexerOptions)\n\n  const addData = React.useCallback(() => {\n    let lastID = dummyState[dummyState.length-1].id;\n    const addState:DummyData[] = [...Array(args.numOfDummyRecords)].map(() => ({\n      id: ++lastID,\n      textOne: randomString(20),\n      textTwo: randomString(30)\n    }));\n    setDummyState(oldState => ([...oldState, ...addState]));\n  }, [dummyState]);\n\n  const [searchTermState, setSearchTermState] = React.useState<string>('');\n  const searchResults = React.useMemo(() => Array.from(indexedState as []).filter((record:IndexState<DummyData>) => record.index.indexOf(searchTermState) > -1), [indexedState, searchTermState])\n\n  return (\n    <>\n     <Highlight className='javascript'>\n      {`\n        import { useSearchIndexer, SearchIndexerOptions, IndexState } from './search-indexer'\n        interface DummyData {\n          id: number,\n          textOne: string,\n          textTwo: string\n        }\n        \n        const randomString = (n:number, r:string|number=''):string => {\n          while (n--) r += String.fromCharCode((r=Math.random()*62|0, r+=r>9?(r<36?55:61):48));\n          return r as string;\n        };\n        \n        const initialDummyState: DummyData[] = [\n          {\n            id: 0,\n            textOne: randomString(20),\n            textTwo: randomString(30)\n          }\n        ]\n\n        const App = () => {\n          const [dummyState, setDummyState] = React.useState<DummyData[]>(initialDummyState);\n          const indexerOptions:SearchIndexerOptions<DummyData> = {\n            getItemKey: (item: DummyData, index: number) => 'KEY-' + item.id,\n            itemFieldsExtractor: async (item:DummyData) =>{\n              return [item.textOne, item.textTwo]\n            },\n            concurrency: 1\n          }\n          const [indexState, indexedState] = useSearchIndexer<DummyData>(dummyState, indexerOptions)\n\n          React.useEffect(() => {\n            let lastID = 0;\n            const addState:DummyData[] = [...Array(100)].map(() => ({\n              id: ++lastID,\n              textOne: randomString(20),\n              textTwo: randomString(30)\n            }));\n            setDummyState(oldState => ([...oldState, ...addState]));\n          }, [])\n\n          const [searchTermState, setSearchTermState] = React.useState<string>('');\n          const searchResults = React.useMemo(() => Array.from(indexedState as []).filter((record:IndexState<DummyData>) => record.index.indexOf(searchTermState) > -1), [indexedState, searchTermState])\n\n          return (\n            <>\n            /// use here searchResults for search results\n            </>\n          )\n        }\n\n        export default App\n      `}\n    </Highlight>\n      <h2>Prepare Data</h2>\n      \n      <button onClick={addData}>Add & Index {args.numOfDummyRecords} Records</button>\n      <div style={{flex: 1, flexDirection: 'row', display: 'flex', paddingTop: 5}}>\n        <div style={{flex: 1}}>\n          Dummy records: {dummyState.length}\n        </div>\n        <div style={{flex: 1}}>\n          Indexed records: {indexedState.length}\n        </div>\n      </div>\n      \n      <h2>Search</h2>\n      <input value={searchTermState} onChange={(event) => setSearchTermState(event.target?.value)} />\n\n      <h2>Results ({searchResults && searchResults.length})</h2>\n      <div>\n        <div style={{flex: 1, flexDirection: 'row', display: 'flex', fontWeight: 'bold', paddingBottom: 5}}>\n          <div style={{flex: 1, flexDirection: 'column'}}>ID</div>\n          <div style={{flex: 5, flexDirection: 'column'}}>textOne</div>\n          <div style={{flex: 5, flexDirection: 'column'}}>textTwo</div>\n        </div>\n      {searchResults && \n        searchResults.slice(-10).map((item, index) => (\n        <div style={{flex: 1, flexDirection: 'row', display: 'flex'}} key={`row-${index}`}>\n          <div style={{flex: 1, flexDirection: 'column'}}>{item.data.id}</div>\n          <div style={{flex: 5, flexDirection: 'column'}}>{item.data.textOne}</div>\n          <div style={{flex: 5, flexDirection: 'column'}}>{item.data.textTwo}</div>\n        </div>))\n      }\n      </div>\n    </>\n  )\n}"}},Search.parameters)}},[[473,2,3]]]);