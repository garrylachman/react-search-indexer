(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{204:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return useSearchIndexer}));__webpack_require__(50),__webpack_require__(17),__webpack_require__(9),__webpack_require__(103),__webpack_require__(13),__webpack_require__(35),__webpack_require__(36),__webpack_require__(44),__webpack_require__(825),__webpack_require__(39),__webpack_require__(42),__webpack_require__(274),__webpack_require__(29),__webpack_require__(32),__webpack_require__(90),__webpack_require__(40),__webpack_require__(43),__webpack_require__(52),__webpack_require__(8),__webpack_require__(104),__webpack_require__(415);var react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_21__),p_queue_dist__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(445);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var initialState={};function useSearchIndexer(state,options){var _options=react__WEBPACK_IMPORTED_MODULE_21___default.a.useMemo((function(){return Object.assign({},function defaultOptions(state){return{getItemKey:function getItemKey(item,index){return"".concat(index)},itemFieldsExtractor:function itemFieldsExtractor(item){return Object.values(item)},concurrency:1}}(),options)}),[options]),_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_21___default.a.useState(initialState),2),indexState=_React$useState2[0],setIndexState=_React$useState2[1],addToQueue=function useIndexerQueue(setIndex){var concurrency=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,queue=react__WEBPACK_IMPORTED_MODULE_21___default.a.useMemo((function(){return new p_queue_dist__WEBPACK_IMPORTED_MODULE_22__.a({concurrency:concurrency})}),[]),add=react__WEBPACK_IMPORTED_MODULE_21___default.a.useCallback(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(task){var res;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,queue.add(task);case 2:res=_context.sent,setIndex((function(prevState){return Object.assign({},prevState,res)}));case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),[queue]);return add}(setIndexState,_options.concurrency);react__WEBPACK_IMPORTED_MODULE_21___default.a.useEffect((function(){var dataWithKeys=_toConsumableArray(state).map((function(value,index){return{key:_options.getItemKey(value,index),data:value}}));dataWithKeys.forEach((function(value,index){null==indexState[value.key]&&addToQueue(_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _index;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,_options.itemFieldsExtractor(value.data);case 2:return _index=_context2.sent,_context2.abrupt("return",_defineProperty({},"".concat(value.key),{index:_index.join(","),data:value.data}));case 4:case"end":return _context2.stop()}}),_callee2)}))))}));var onlyKeys=Object.fromEntries(dataWithKeys.map((function(v){return[v.key,{index:null,data:v.data}]})));setIndexState((function(prevState){return Object.assign({},onlyKeys,prevState)}))}),[state]),react__WEBPACK_IMPORTED_MODULE_21___default.a.useEffect((function(){console.log("indexState effect",indexState)}),[indexState]);var indexedState=react__WEBPACK_IMPORTED_MODULE_21___default.a.useMemo((function(){return Object.values(indexState).filter((function(item){return null!=item.index}))}),[indexState]);return[indexState,indexedState]}},466:function(module,exports,__webpack_require__){__webpack_require__(467),__webpack_require__(623),__webpack_require__(624),__webpack_require__(828),__webpack_require__(829),__webpack_require__(832),__webpack_require__(831),__webpack_require__(830),__webpack_require__(833),__webpack_require__(834),module.exports=__webpack_require__(821)},534:function(module,exports){},624:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(326)},821:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(326).configure)([__webpack_require__(822)],module,!1)}).call(this,__webpack_require__(184)(module))},822:function(module,exports,__webpack_require__){var map={"./BasicIndexer.stories.tsx":823,"./SearchIndexer.stories.tsx":827};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=822},823:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Basic",(function(){return Basic}));__webpack_require__(50),__webpack_require__(17),__webpack_require__(416),__webpack_require__(13),__webpack_require__(14),__webpack_require__(417),__webpack_require__(9),__webpack_require__(274),__webpack_require__(29),__webpack_require__(32),__webpack_require__(90),__webpack_require__(40),__webpack_require__(39),__webpack_require__(43),__webpack_require__(52),__webpack_require__(8),__webpack_require__(104);var react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__),_search_indexer__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(204),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(34);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var sleep=function sleep(milliseconds){return new Promise((function(resolve){return setTimeout(resolve,milliseconds)}))},randomString=function randomString(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n--;)r+=String.fromCharCode((r=62*Math.random()|0,r+=r>9?r<36?55:61:48));return r},initialDummyState=[{id:0,textOne:randomString(20),textTwo:randomString(30)}],Template=function Template(args){var _itemFieldsExtractor,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_17___default.a.useState(initialDummyState),2),dummyState=_React$useState2[0],setDummyState=_React$useState2[1],indexerOptions={getItemKey:function getItemKey(item,index){return"KEY-".concat(item.id)},itemFieldsExtractor:(_itemFieldsExtractor=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(item){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(args.delay>0)){_context.next=3;break}return _context.next=3,sleep(1e3*args.delay);case 3:return _context.abrupt("return",[item.textOne,item.textTwo]);case 4:case"end":return _context.stop()}}),_callee)}))),function itemFieldsExtractor(_x){return _itemFieldsExtractor.apply(this,arguments)}),concurrency:1},_useSearchIndexer2=_slicedToArray(Object(_search_indexer__WEBPACK_IMPORTED_MODULE_18__.a)(dummyState,indexerOptions),2),indexedState=(_useSearchIndexer2[0],_useSearchIndexer2[1]),addData=react__WEBPACK_IMPORTED_MODULE_17___default.a.useCallback((function(){var lastID=dummyState[dummyState.length-1].id,addState=_toConsumableArray(Array(args.numOfDummyRecords)).map((function(){return{id:++lastID,textOne:randomString(20),textTwo:randomString(30)}}));console.log("add",addState),setDummyState((function(oldState){return[].concat(_toConsumableArray(oldState),_toConsumableArray(addState))}))}),[dummyState]);return react__WEBPACK_IMPORTED_MODULE_17___default.a.useEffect((function(){console.log("effect",dummyState)}),[dummyState]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)("button",{onClick:addData,children:"Add & Index"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{children:["Dummy records: ",dummyState.length]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsxs)("div",{children:["Indexed records: ",indexedState.length]})]})};__webpack_exports__.default={title:"useSearchIndexer",component:Template,argTypes:{delay:{control:{type:"range",min:0,max:10,step:1}}}};var Basic=Template.bind({});Basic.args={delay:0,numOfDummyRecords:10},Basic.parameters={docs:{source:{code:Template}}},Basic.parameters=Object.assign({storySource:{source:'(args: StoryArgs) => {\n\n  const [dummyState, setDummyState] = React.useState<DummyData[]>(initialDummyState);\n  const indexerOptions:SearchIndexerOptions<DummyData> = {\n    getItemKey: (item: DummyData, index: number) => `KEY-${item.id}`,\n    itemFieldsExtractor: async (item:DummyData) =>{\n      if (args.delay > 0) {\n        await sleep(args.delay*1000);\n      }\n      return [item.textOne, item.textTwo]\n    },\n    concurrency: 1\n  }\n  const [indexState, indexedState] = useSearchIndexer<DummyData>(dummyState, indexerOptions)\n\n  const addData = React.useCallback(() => {\n    let lastID = dummyState[dummyState.length-1].id;\n    const addState:DummyData[] = [...Array(args.numOfDummyRecords)].map(() => ({\n      id: ++lastID,\n      textOne: randomString(20),\n      textTwo: randomString(30)\n    }));\n    console.log("add", addState)\n    setDummyState(oldState => ([...oldState, ...addState]));\n  }, [dummyState]);\n\n  React.useEffect(() => {\n    console.log("effect", dummyState)\n  }, [dummyState])\n\n  return (\n    <>\n      <button onClick={addData}>Add & Index</button>\n      <div>\n        Dummy records: {dummyState.length}\n      </div>\n      <div>\n        Indexed records: {indexedState.length}\n      </div>\n\n    </>\n  )\n}'}},Basic.parameters)},827:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Search",(function(){return Search}));__webpack_require__(50),__webpack_require__(17),__webpack_require__(416),__webpack_require__(13),__webpack_require__(14),__webpack_require__(42),__webpack_require__(25),__webpack_require__(417),__webpack_require__(9),__webpack_require__(274),__webpack_require__(29),__webpack_require__(32),__webpack_require__(90),__webpack_require__(40),__webpack_require__(39),__webpack_require__(43),__webpack_require__(52),__webpack_require__(8),__webpack_require__(104);var react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),_search_indexer__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(204),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(34);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var sleep=function sleep(milliseconds){return new Promise((function(resolve){return setTimeout(resolve,milliseconds)}))},randomString=function randomString(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n--;)r+=String.fromCharCode((r=62*Math.random()|0,r+=r>9?r<36?55:61:48));return r},initialDummyState=[{id:0,textOne:randomString(20),textTwo:randomString(30)}],Template=function Template(args){var _itemFieldsExtractor,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_19___default.a.useState(initialDummyState),2),dummyState=_React$useState2[0],setDummyState=_React$useState2[1],indexerOptions={getItemKey:function getItemKey(item,index){return"KEY-".concat(item.id)},itemFieldsExtractor:(_itemFieldsExtractor=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(item){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(args.delay>0)){_context.next=3;break}return _context.next=3,sleep(1e3*args.delay);case 3:return _context.abrupt("return",[item.textOne,item.textTwo]);case 4:case"end":return _context.stop()}}),_callee)}))),function itemFieldsExtractor(_x){return _itemFieldsExtractor.apply(this,arguments)}),concurrency:1},_useSearchIndexer2=_slicedToArray(Object(_search_indexer__WEBPACK_IMPORTED_MODULE_20__.a)(dummyState,indexerOptions),2),indexedState=(_useSearchIndexer2[0],_useSearchIndexer2[1]),addData=react__WEBPACK_IMPORTED_MODULE_19___default.a.useCallback((function(){var lastID=dummyState[dummyState.length-1].id,addState=_toConsumableArray(Array(args.numOfDummyRecords)).map((function(){return{id:++lastID,textOne:randomString(20),textTwo:randomString(30)}}));console.log("add",addState),setDummyState((function(oldState){return[].concat(_toConsumableArray(oldState),_toConsumableArray(addState))}))}),[dummyState]);react__WEBPACK_IMPORTED_MODULE_19___default.a.useEffect((function(){console.log("effect",dummyState)}),[dummyState]);var _React$useState4=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_19___default.a.useState(""),2),searchTermState=_React$useState4[0],setSearchTermState=_React$useState4[1],searchResults=react__WEBPACK_IMPORTED_MODULE_19___default.a.useMemo((function(){return indexedState.filter((function(record){return record.index.indexOf(searchTermState)>-1}))}),[indexedState,searchTermState]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("h2",{children:"Prepare Data"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("button",{onClick:addData,children:["Add & Index ",args.numOfDummyRecords," Records"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{children:["Dummy records: ",dummyState.length]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{children:["Indexed records: ",indexedState.length]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("h2",{children:"Search"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("input",{value:searchTermState,onChange:function onChange(event){var _event$target;return setSearchTermState(null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.value)}}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("h2",{children:"Results"}),searchResults&&searchResults.map((function(item,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{children:JSON.stringify(item.data)})}))]})};__webpack_exports__.default={title:"useSearchIndexer",component:Template,argTypes:{}};var Search=Template.bind({});Search.args={numOfDummyRecords:10},Search.parameters=Object.assign({storySource:{source:'(args: StoryArgs) => {\n\n  const [dummyState, setDummyState] = React.useState<DummyData[]>(initialDummyState);\n  const indexerOptions:SearchIndexerOptions<DummyData> = {\n    getItemKey: (item: DummyData, index: number) => `KEY-${item.id}`,\n    itemFieldsExtractor: async (item:DummyData) =>{\n      if (args.delay > 0) {\n        await sleep(args.delay*1000);\n      }\n      return [item.textOne, item.textTwo]\n    },\n    concurrency: 1\n  }\n  const [indexState, indexedState] = useSearchIndexer<DummyData>(dummyState, indexerOptions)\n\n  const addData = React.useCallback(() => {\n    let lastID = dummyState[dummyState.length-1].id;\n    const addState:DummyData[] = [...Array(args.numOfDummyRecords)].map(() => ({\n      id: ++lastID,\n      textOne: randomString(20),\n      textTwo: randomString(30)\n    }));\n    console.log("add", addState)\n    setDummyState(oldState => ([...oldState, ...addState]));\n  }, [dummyState]);\n\n  React.useEffect(() => {\n    console.log("effect", dummyState)\n  }, [dummyState])\n\n  const [searchTermState, setSearchTermState] = React.useState<string>(\'\');\n  const searchResults = React.useMemo(() => indexedState.filter((record:IndexState<DummyData>) => record.index.indexOf(searchTermState) > -1), [indexedState, searchTermState])\n\n  return (\n    <>\n      <h2>Prepare Data</h2>\n      \n      <button onClick={addData}>Add & Index {args.numOfDummyRecords} Records</button>\n      <div>\n        Dummy records: {dummyState.length}\n      </div>\n      <div>\n        Indexed records: {indexedState.length}\n      </div>\n\n      <h2>Search</h2>\n      <input value={searchTermState} onChange={(event) => setSearchTermState(event.target?.value)} />\n\n      <h2>Results</h2>\n      {searchResults && \n        searchResults.map((item, index) => (<div>{JSON.stringify(item.data)}</div>))\n      }\n    </>\n  )\n}'}},Search.parameters)},834:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__(15),__webpack_require__(29),__webpack_require__(42),__webpack_require__(818),__webpack_require__(35),__webpack_require__(36),__webpack_require__(819),__webpack_require__(820),__webpack_require__(415);var client_api=__webpack_require__(839),esm=__webpack_require__(5),parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{expanded:!0}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))}},[[466,2,3]]]);